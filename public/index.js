const apiKey = "8f15dd610db0f3c8fb64da76c86fd488", url = "https://api.themoviedb.org/3/", imgUrl = "https://image.tmdb.org/t/p/w500", carouselInner = document.querySelector(".carousel-inner"), form = document.querySelector("form"), input = document.querySelector("input"), cardContainer = document.querySelector(".card-container"), topRatedContainer = document.querySelector("#top-rated-container"), nowWatchingContainer = document.querySelector("#now-watching-container"); function carousel() { fetch(`${url}trending/movie/week?api_key=${apiKey}`).then(e => e.json()).then(displayCarousel).catch(e => { console.log(e) }) } function displayCarousel(e) { carouselInner.innerHTML = `<div class="carousel-item active">\n    <img class="first-slide"\n        src="${imgUrl}${e.results[0].backdrop_path}"\n        alt="First slide">\n    <div class="container">\n        <div class="carousel-caption text-left">\n            <h1>${e.results[0].title}</h1>\n            <p>${e.results[0].overview}</p>\n            <p><a class="btn btn-lg btn-primary" href="/info/movie/${e.results[0].id}" role="button">Learn More</a></p>\n        </div>\n    </div>\n</div>\n<div class="carousel-item">\n    <img class="second-slide"\n        src="${imgUrl}${e.results[1].backdrop_path}"\n        alt="Second slide">\n    <div class="container">\n        <div class="carousel-caption text-left">\n            <h1>${e.results[1].title}</h1>\n            <p>${e.results[1].overview}</p>\n            <p><a class="btn btn-lg btn-primary" href="/info/movie/${e.results[1].id}" role="button">Learn more</a></p>\n        </div>\n    </div>\n</div>\n<div class="carousel-item">\n    <img class="third-slide"\n        src="${imgUrl}${e.results[2].backdrop_path}"\n        alt="Third slide">\n    <div class="container">\n        <div class="carousel-caption text-left">\n            <h1>${e.results[2].title}</h1>\n            <p>${e.results[2].overview}</p>\n            <p><a class="btn btn-lg btn-primary" href="/info/movie/${e.results[2].id}" role="button">Learn More</a></p>\n        </div>\n    </div>\n</div>\n<div class="carousel-item">\n    <img class="fourth-slide"\n        src="${imgUrl}${e.results[3].backdrop_path}"\n        alt="Fourth slide">\n    <div class="container">\n        <div class="carousel-caption text-left">\n            <h1>${e.results[3].title}</h1>\n            <p>${e.results[3].overview}</p>\n            <p><a class="btn btn-lg btn-primary" href="/info/movie/${e.results[3].id}" role="button">Learn More</a></p>\n        </div>\n    </div>\n</div>\n<div class="carousel-item">\n    <img class="fifth-slide"\n        src="${imgUrl}${e.results[4].backdrop_path}"\n        alt="Fifth slide">\n    <div class="container">\n        <div class="carousel-caption text-left">\n            <h1>${e.results[4].title}</h1>\n            <p>${e.results[4].overview}</p>\n            <p><a class="btn btn-lg btn-primary" href="/info/movie/${e.results[4].id}" role="button">Learn More</a></p>\n        </div>\n    </div>\n</div>\n<div class="carousel-item">\n    <img class="sixth-slide"\n        src="${imgUrl}${e.results[5].backdrop_path}"\n        alt="Sixth slide">\n    <div class="container">\n        <div class="carousel-caption text-left">\n            <h1>${e.results[5].title}</h1>\n            <p>${e.results[5].overview}</p>\n            <p><a class="btn btn-lg btn-primary" href="/info/movie/${e.results[5].id}" role="button">Learn More</a></p>\n        </div>\n    </div>\n</div>` } function topRated() { fetch(`${url}movie/top_rated?api_key=${apiKey}&language=en-US`).then(e => e.json()).then(e => { let t = ""; for (let n = 0; n < e.results.length; n++)e.results[n].poster_path && (t += `<div class="slide"><figure>\n                    <a href="/info/movie/${e.results[n].id}"><img src="${imgUrl}${e.results[n].poster_path}" class="top-rated-card" alt="poster"></a>\n                    <figcaption> ${e.results[n].title} </figcaption>\n                    </figure></div>`); topRatedContainer.innerHTML = t }).catch(e => { console.log(e) }) } function nowPlaying() { fetch(`${url}movie/now_playing?api_key=${apiKey}&language=en-US&page=1`).then(e => e.json()).then(e => { let t = ""; for (let n = 0; n < e.results.length; n++)e.results[n].poster_path && (t += `<div class="slide"><figure>\n                    <a href="/info/movie/${e.results[n].id}"><img src="${imgUrl}${e.results[n].poster_path}" class="top-rated-card" alt="poster"></a>\n                    <figcaption> ${e.results[n].title} </figcaption>\n                    </figure></div>`); nowWatchingContainer.innerHTML = t }).catch(e => { console.log(e) }) } function getResults(e) { let t = `${url}search/movie?api_key=${apiKey}&query=${e}&page=1&include_adult=false&language=en`; console.log(t), fetch(t).then(e => e.json()).then(displayResults).catch(e => { console.log(e) }) } function displayResults(e) { let t = ""; for (let n = 0; n < e.results.length; n++)e.results[n].poster_path && (t += `<a href="/info/movie/${e.results[n].id}">\n        <div class="profile-card-2"><img\n                src="${imgUrl}${e.results[n].poster_path}"\n                class="img img-responsive">\n            <div class="profile-name">${e.results[n].title}</div>\n            <div class="vote">${e.results[n].vote_average}</div>\n            <div class="release-date">${e.results[n].release_date}</div>\n        </div>\n    </a>`); cardContainer.innerHTML = t } carousel(), topRated(), nowPlaying(), form.addEventListener("submit", e => { e.preventDefault(), getResults(input.value) });